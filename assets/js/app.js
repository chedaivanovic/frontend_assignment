let getId=e=>document.getElementById(e),getClass=e=>document.getElementsByClassName(e),crEl=e=>document.createElement(e),empty=e=>{e.innerHTML=""},currentPage=1,theBook={selected_genre:"",selected_subgenre:"",book_title:"",book_author:"",book_ISBN:"",book_publisher:"",book_date:"",book_pagesno:"",book_format:"",book_edition:"",book_lang:"",book_description:""};const newBtn={id:"0",name:"New"};let authors=[{name:"Beck Villanueva",id:"1"},{name:"Anastasia Morales",id:"2"},{name:"Shelby Larsen",id:"3"},{name:"Sheikh Fuentes",id:"4"},{name:"Ishaq Nieves",id:"5"},{name:"Mohsin Gamble",id:"6"},{name:"Hugo Finney",id:"7"},{name:"Viola Britton",id:"8"},{name:"Rumaisa James",id:"9"},{name:"Jasleen Bright",id:"10"}],publishers=[{name:"Publisher 1",id:"1"},{name:"Publisher 2",id:"2"},{name:"Publisher 3",id:"3"}],formats=[{name:"Format 1",id:"1"},{name:"Format 2",id:"2"},{name:"Format 3",id:"3"}],langs=[{name:"Language 1",id:"1"},{name:"Language 2",id:"2"},{name:"Language 3",id:"3"}],createButton=(e,t="disabled")=>{let n=crEl("input");n.classList.add("global-button",`${t}-button`),n.setAttribute("type","radio"),n.id=`${"new"===t?"subgenre":t}-${e.id}`,n.setAttribute("name",`select-${"new"===t?"subgenre":t}`),n.value=e.id;let a=crEl("label");a.setAttribute("for",`${"new"===t?"subgenre":t}-${e.id}`),a.innerHTML=e.name,appBody.append(n,a)};const appHolder=getId("app"),appHeading=getId("app-heading"),appBody=getId("app-body"),appFooter=getId("app-footer"),appSuccess=getId("app-success");fetch("/data/data.json").then((e=>e.json())).then((e=>{let t=()=>{if(1!=currentPage){let e=crEl("button");e.classList.add("disabled","footer-btn","footer-btn-back"),e.id="back-btn",e.innerHTML="Back",appFooter.append(e)}let t=crEl("button");t.classList.add("disabled","footer-btn","footer-btn-next"),t.disabled=!0,t.id="next-btn",t.innerHTML="Next",t.addEventListener("click",(()=>{let t;switch(currentPage){case 1:t="genre";break;case 2:t="subgenre";break;default:t="some"}let n=parseInt(appBody.querySelector(`input[name="select-${t}"]:checked`).value);switch(currentPage){case 1:currentPage++;const t=e.genres.find((e=>e.id===parseInt(n)));a(t);break;case 2:if(currentPage++,0===n)o();else{const e=theBook.selected_genre.subgenres.find((e=>e.id===parseInt(n)));r(e)}}})),appFooter.append(t)},n=()=>{getId("next-btn").removeAttribute("disabled")},a=e=>{for(subgenre of(theBook.selected_genre=e,empty(appBody),empty(appFooter),e.subgenres))createButton(subgenre,"subgenre"),getId(`subgenre-${subgenre.id}`).addEventListener("click",(()=>{1==getId("next-btn").disabled&&n()}));createButton(newBtn,"new"),getId("subgenre-0").addEventListener("click",(()=>{1==getId("next-btn").disabled&&n()})),t()},o=()=>{empty(appBody),empty(appFooter);let e=crEl("input");e.type="text",e.placeholder="Subgenre name",e.id="new-subgenre-name",appBody.append(e),t()},r=e=>{theBook.selected_subgenre=e;let t=!1;!0===e.isDescriptionRequired&&(t=!0),empty(appBody),empty(appFooter),crEl("form").id="book-form";let n=[],a=crEl("input");a.type="text",a.placeholder="Book title",n[0]=a;let o=crEl("select");o.id="select-author";for(let e of authors){let t=crEl("option");t.value=e.id,t.innerHTML=e.name,t.id=`author-${e.id}`,o.append(t)}n[1]=o;let r=crEl("input");r.id="book-isbn",r.placeholder="ISBN",r.type="text",n[2]=r;let d=crEl("select");d.id="select-publisher";for(let e of publishers){let t=crEl("option");t.value=e.id,t.innerHTML=e.name,t.id=`publisher-${e.id}`,d.append(t)}n[3]=d;let l=crEl("input");l.id="book-date",l.placeholder="Date published",l.type="date",n[4]=l;let i=crEl("input");i.id="book-pages",i.placeholder="Number of pages",i.type="number",n[5]=i;let s=crEl("select");s.id="select-format";for(let e of formats){let t=crEl("option");t.value=e.id,t.innerHTML=e.name,t.id=`format-${e.id}`,s.append(t)}n[6]=s;let p=crEl("input");p.id="book-edition",p.placeholder="Edition",p.type="number",n[7]=p;let c=crEl("select");c.id="select-lang";for(let e of langs){let t=crEl("option");t.value=e.id,t.innerHTML=e.name,t.id=`lang-${e.id}`,c.append(t)}n[8]=c;let b=crEl("textarea");b.id="book-description",b.placeholder="Description",b.type="number",n[9]=b,console.log(n);for(let e of n){console.log(e);let t=crEl("label");t.classList.add("unstyled-label"),t.setAttribute("for",e.id),t.innerHTML=e.placeholder,appBody.append(t),appBody.append(e)}};(()=>{for(genre of(empty(appBody),empty(appFooter),e.genres))createButton(genre,"genre"),getId(`genre-${genre.id}`).addEventListener("click",(()=>{1==getId("next-btn").disabled&&n()}));t()})()}));